let minimatch,getRuntimeSpecs,log,pluralize;_451‍.x([["getStories",()=>getStories]]);_451‍.w("minimatch",[["default",["minimatch"],function(v){minimatch=v}]]);_451‍.w("../tester/runtimes",[["default",["getRuntimeSpecs"],function(v){getRuntimeSpecs=v}]]);_451‍.w("../lib/log",[["default",["log"],function(v){log=v}]]);_451‍.w("../lib/pluralize",[["pluralize",["pluralize"],function(v){pluralize=v}]]);




       async function getStories({ only, list, isolatorUrl, verbose, allowConsoleErrors }) {
  let predicate = () => true;
  if (only) {
    const match = only.match(/(.*):([^:]*)/);
    if (!match) {
      throw new Error(`--only argument must provided in the form "componentName:storyName"`);
    }
    log.info(`Running only story '${match[2]}' of component '${match[1]}'`);
    predicate = ({ name, component: { name: componentName } }) =>
      minimatch(name, match[2]) && minimatch(componentName, match[1]);
  }
  let listStory = story => story;
  if (list) {
    log.info('Listing available stories:');
    listStory = story => {
      const {
        name,
        component: { name: componentName },
      } = story;
      log.info(`${componentName}:${name}`);
      return story;
    };
  }
  const runtimeSpecs = (await getRuntimeSpecs(isolatorUrl, { verbose, allowConsoleErrors }))
    .map(listStory)
    .filter(predicate);

  if (runtimeSpecs.length === 0) {
    throw new Error('Cannot run a build with no stories. Please add some stories!');
  }

  log.info(`Found ${pluralize(runtimeSpecs.length, 'story')}`);
  return runtimeSpecs;
}
